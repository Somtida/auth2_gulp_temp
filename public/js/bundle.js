"use strict";var app=angular.module("myApp",["ui.router","satellizer"]);app.config(["$authProvider",function(e){e.loginUrl="/api/users/login",e.signupUrl="/api/users/signup",e.facebook({clientId:"1738789493057908",url:"/api/users/facebook"})}]),app.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/",templateUrl:"/html/home.html"}).state("login",{url:"/login",templateUrl:"/html/login.html",controller:"loginCtrl"}).state("register",{url:"/register",templateUrl:"/html/register.html",controller:"registerCtrl"}).state("profile",{url:"/profile",templateUrl:"/html/profile.html",controller:"profileCtrl",resolve:{Profile:["User",function(e){return e.profile()}]}}).state("users",{url:"/users",templateUrl:"/html/users.html",controller:"usersCtrl",resolve:{Users:["User",function(e){return e.getAll()}]}}),t.otherwise("/")}]);var app=angular.module("myApp");app.controller("mainCtrl",["$scope","$state","$auth","$q",function(e,t,r,o){console.log("mainCtrl!"),e.isAuthenticated=function(){return r.isAuthenticated()},e.logout=function(){r.logout(),t.go("home")},e.authenticate=function(e){r.authenticate(e).then(function(e){t.go("home")})["catch"](function(e){console.log("err:",e)})}}]),app.controller("loginCtrl",["$scope","$state","$auth",function(e,t,r){console.log("loginCtrl!"),e.login=function(){r.login(e.user).then(function(e){console.log("res:",e),t.go("profile")})["catch"](function(e){console.log("err:",e)})}}]),app.controller("registerCtrl",["$scope","$state","$auth",function(e,t,r){console.log("registerCtrl!"),e.register=function(){e.user.password!==e.user.password2?(e.user.password=null,e.user.password2=null,alert("Passwords must match.  Try again.")):r.signup(e.user).then(function(e){console.log("res:",e),t.go("login")})["catch"](function(e){console.log("err:",e)})}}]),app.controller("profileCtrl",["$scope","Profile",function(e,t){console.log("profileCtrl!"),e.user=t}]),app.controller("usersCtrl",["$scope","Users","$state","User",function(e,t,r,o){console.log("usersCtrl!"),e.users=t,e.toggleAuthorization=function(e){console.log("user: ",e),o.toggleAuthor(e._id).then(function(t){console.log("res: ",t),e.admin=!e.admin})["catch"](function(e){console.log("err: ",e)})}}]);var app=angular.module("myApp");app.service("User",["$http","$q",function(e,t){this.profile=function(){return e.get("/api/users/profile").then(function(e){return t.resolve(e.data)})},this.getAll=function(){return e.get("/api/users").then(function(e){return t.resolve(e.data)})},this.toggleAuthor=function(t){return e.put("/api/users/"+t+"/toggleAdmin")}}]);